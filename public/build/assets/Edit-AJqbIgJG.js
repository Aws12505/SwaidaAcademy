import{r as N,b as A,j as e,H as S,L as y}from"./app-CeNoS8ZD.js";import{A as F}from"./app-layout-ySNOi0h_.js";import{B as c}from"./button-CGOeFzJq.js";import{I as C}from"./input-BIinOsen.js";import{L as w}from"./label-CgN9YI2m.js";import{C as h,c as x,b as p,a as u}from"./card-vGRkm2zY.js";import{S as D}from"./separator-CYGR4dGp.js";import{T as E,a as I,b as g,c as j}from"./tabs-CJiIhhdW.js";import{Q as _}from"./QuillEditorPro-BdYzYnJk.js";import{v as H}from"./v4-EwEgHOG0.js";import{A as P}from"./arrow-left-CIkcX4Zh.js";import{U as R}from"./upload-rVYKp4Sf.js";import{X as $}from"./sheet-DDxHOeEe.js";/* empty css            */import"./index-b3VL0-ce.js";import"./index-1FoEdlk_.js";import"./target-LhiHsZwj.js";import"./eye-DswfEn5J.js";import"./dialog-Dkdpxvro.js";const z=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Blogs",href:"/admin/blogs"},{title:"Edit",href:"#"}];function ne({blog:d}){const[l,f]=N.useState([]),{data:i,setData:a,post:k,processing:b,errors:n}=A({title:d.title,content:d.content,draft_token:void 0});N.useEffect(()=>{i.draft_token||a("draft_token",H())},[]);const B=s=>{const t=Array.from(s.target.files||[]);if(t.length===0)return;const o=t.map((m,v)=>({file:m,is_cover:l.length===0&&v===0,preview:URL.createObjectURL(m)})),r=[...l,...o];f(r),a("images",r.map(({file:m,is_cover:v})=>({file:m,is_cover:v})))},U=s=>{const t=l.filter((o,r)=>r!==s);f(t),t.length>0?a("images",t.map(({file:o,is_cover:r})=>({file:o,is_cover:r}))):a("images",void 0)},L=s=>{const t=l.map((o,r)=>({...o,is_cover:r===s}));f(t),t.length>0&&a("images",t.map(({file:o,is_cover:r})=>({file:o,is_cover:r})))},T=s=>{s.preventDefault(),l.length===0&&a("images",void 0),k(`/admin/blogs/${d.id}/update`)};return e.jsxs(F,{breadcrumbs:z,children:[e.jsx(S,{title:`Edit: ${d.title.en||"Blog"}`}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsx("div",{className:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Edit Blog Post"}),e.jsx("p",{className:"text-muted-foreground",children:"Update blog post information"})]}),e.jsx(c,{asChild:!0,variant:"outline",children:e.jsxs(y,{href:"/admin/blogs",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back"]})})]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[d.images&&d.images.length>0&&e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(p,{children:"Current Images"})}),e.jsx(u,{children:e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:d.images.map(s=>e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-lg border",children:[e.jsx("img",{src:s.image_url,alt:"Blog",className:"h-full w-full object-cover"}),s.is_cover&&e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:"Cover"})]},s.id))})})]}),e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(p,{children:"Basic Information"})}),e.jsx(u,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Title *"}),e.jsxs(E,{defaultValue:"en",children:[e.jsxs(I,{className:"grid w-full grid-cols-2",children:[e.jsx(g,{value:"en",children:"English"}),e.jsx(g,{value:"ar",children:"العربية"})]}),e.jsx(j,{value:"en",children:e.jsx(C,{value:i.title.en,onChange:s=>a("title",{...i.title,en:s.target.value}),placeholder:"Enter blog title in English"})}),e.jsx(j,{value:"ar",children:e.jsx(C,{value:i.title.ar,onChange:s=>a("title",{...i.title,ar:s.target.value}),placeholder:"أدخل عنوان المقال بالعربية",dir:"rtl"})})]}),(n["title.en"]||n["title.ar"])&&e.jsx("p",{className:"text-sm text-destructive",children:n["title.en"]||n["title.ar"]})]})})]}),e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(p,{children:"Content *"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs(E,{defaultValue:"en",children:[e.jsxs(I,{className:"grid w-full grid-cols-2",children:[e.jsx(g,{value:"en",children:"English"}),e.jsx(g,{value:"ar",children:"العربية"})]}),e.jsx(j,{value:"en",children:e.jsx(_,{value:i.content.en,onChange:s=>a("content",{...i.content,en:s}),placeholder:"Write your blog content in English...",height:"500px"})}),e.jsx(j,{value:"ar",children:e.jsx(_,{value:i.content.ar,onChange:s=>a("content",{...i.content,ar:s}),placeholder:"اكتب محتوى المقال بالعربية...",height:"500px"})})]}),(n["content.en"]||n["content.ar"])&&e.jsx("p",{className:"text-sm text-destructive",children:n["content.en"]||n["content.ar"]})]})]}),e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(p,{children:"Upload New Images"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Upload Images"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{type:"button",variant:"outline",onClick:()=>document.getElementById("images")?.click(),children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Choose Files"]}),e.jsx("input",{id:"images",type:"file",multiple:!0,accept:"image/*",onChange:B,className:"hidden"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.length," file(s) selected"]})]})]}),l.length>0&&e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:l.map((s,t)=>e.jsxs("div",{className:"relative group aspect-video overflow-hidden rounded-lg border",children:[e.jsx("img",{src:s.preview,alt:`Upload ${t+1}`,className:"h-full w-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(c,{type:"button",size:"sm",variant:s.is_cover?"default":"secondary",onClick:()=>L(t),children:s.is_cover?"Cover":"Set Cover"}),e.jsx(c,{type:"button",size:"sm",variant:"destructive",onClick:()=>U(t),children:e.jsx($,{className:"h-4 w-4"})})]})]},t))})]})]}),e.jsx(D,{}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(c,{type:"button",variant:"outline",asChild:!0,children:e.jsx(y,{href:"/admin/blogs",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:b,children:b?"Updating...":"Update Blog Post"})]})]})]})})})]})}export{ne as default};
