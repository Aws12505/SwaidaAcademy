import{u as O,r as t,j as e,H as R,L as m,a as w}from"./app-qlYxv0hh.js";import{A as P}from"./app-layout-CMRIl-zK.js";import{B as l}from"./button-waOfmUTx.js";import{I as x}from"./input-AmPzn_TT.js";import{L as n}from"./label-BhhtNy-4.js";import{S as D,a as A,b as E,c as F,d as o}from"./select-DeG-U50_.js";import{C as Q,c as G,b as J,a as K}from"./card-DlRpMEN9.js";import{T as W,a as X,b as u}from"./tabs-BaQBAfY5.js";import{T as Y,a as Z,b as j,c,d as k,e as i}from"./table-DlGKznw7.js";import{S as ee}from"./search-BFwQNn6k.js";import{C as H}from"./calendar-DAZ0OJzv.js";import{E as p}from"./eye-Cd1ypHn4.js";import{E as se}from"./external-link-Dlx9VFvi.js";/* empty css            */import"./sheet-BHSaRMcG.js";import"./index-CwWFbO6h.js";import"./index-BJfngDup.js";import"./target-ChaerNHL.js";const ae=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Analytics",href:"/admin/analytics"}];function Ne({type:B,items:h,filters:d}){const{locale:a}=O().props,[r,q]=t.useState(B),[f,v]=t.useState(d.q??""),[g,_]=t.useState(d.sort_by??"created_at"),[N,b]=t.useState(d.sort_dir??"desc"),[y,S]=t.useState(d.date_from??""),[C,T]=t.useState(d.date_to??""),L=()=>{w.get("/admin/analytics",{type:r,q:f||void 0,sort_by:g,sort_dir:N,date_from:y||void 0,date_to:C||void 0},{preserveScroll:!0,preserveState:!0,replace:!0})};t.useEffect(()=>{L()},[r]);const z=t.useMemo(()=>a==="ar"?"العنوان":"Title",[a]),I=a==="ar"?"التاريخ":"Date",$=a==="ar"?"المستخدم":"User",U=a==="ar"?"الإجراءات":"Actions",V=s=>a==="ar"?s.title_ar||s.title_en||"-":s.title_en||s.title_ar||"-";return e.jsxs(P,{breadcrumbs:ae,children:[e.jsx(R,{title:a==="ar"?"التحليلات":"Analytics"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs(Q,{children:[e.jsx(G,{children:e.jsx(J,{children:a==="ar"?"تحليلات تفصيلية":"Detailed Analytics"})}),e.jsxs(K,{className:"space-y-4",children:[e.jsx(W,{value:r,onValueChange:s=>q(s),children:e.jsxs(X,{className:"grid grid-cols-3 w-full",children:[e.jsx(u,{value:"courses",children:a==="ar"?"الدورات":"Courses"}),e.jsx(u,{value:"scholarships",children:a==="ar"?"المنح":"Scholarships"}),e.jsx(u,{value:"users",children:a==="ar"?"المستخدمون":"Users"})]})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(n,{htmlFor:"q",children:a==="ar"?"بحث":"Search"}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{id:"q",value:f,onChange:s=>v(s.target.value),placeholder:a==="ar"?"ابحث بالعنوان أو المستخدم":"Search by title or user",className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"date_from",children:a==="ar"?"من تاريخ":"From"}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{id:"date_from",type:"date",value:y||"",onChange:s=>S(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"date_to",children:a==="ar"?"إلى تاريخ":"To"}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{id:"date_to",type:"date",value:C||"",onChange:s=>T(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(n,{children:a==="ar"?"الترتيب حسب":"Sort By"}),e.jsxs(D,{value:g,onValueChange:s=>_(s),children:[e.jsx(A,{className:"mt-2",children:e.jsx(E,{})}),e.jsxs(F,{children:[e.jsx(o,{value:"created_at",children:a==="ar"?"التاريخ":"Date"}),e.jsx(o,{value:"user_name",children:a==="ar"?"المستخدم":"User"}),e.jsx(o,{value:"title",children:a==="ar"?"العنوان":"Title"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:a==="ar"?"الاتجاه":"Direction"}),e.jsxs(D,{value:N,onValueChange:s=>b(s),children:[e.jsx(A,{className:"mt-2",children:e.jsx(E,{})}),e.jsxs(F,{children:[e.jsx(o,{value:"desc",children:a==="ar"?"تنازلي":"Desc"}),e.jsx(o,{value:"asc",children:a==="ar"?"تصاعدي":"Asc"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{v(""),S(""),T(""),_("created_at"),b("desc")},children:a==="ar"?"إعادة تعيين":"Reset"}),e.jsx(l,{onClick:L,children:a==="ar"?"تطبيق":"Apply"})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(j,{children:[e.jsx(c,{children:I}),r!=="users"&&e.jsx(c,{children:z}),r!=="users"&&e.jsx(c,{children:$}),r==="users"&&e.jsx(c,{children:a==="ar"?"الاسم":"Name"}),r==="users"&&e.jsx(c,{children:"Email"}),e.jsx(c,{className:"text-right",children:U})]})}),e.jsx(k,{children:h.data.length===0?e.jsx(j,{children:e.jsx(i,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:a==="ar"?"لا توجد بيانات":"No data"})}):h.data.map(s=>e.jsxs(j,{children:[e.jsx(i,{className:"whitespace-nowrap text-sm",children:new Date(s.created_at).toLocaleString()}),r!=="users"&&e.jsx(i,{className:"max-w-[300px] truncate",children:V(s)}),r!=="users"&&e.jsxs(i,{className:"max-w-[260px] truncate",children:[s.user_name," ",e.jsxs("span",{className:"text-muted-foreground text-xs",children:["(",s.user_email,")"]})]}),r==="users"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"max-w-[260px] truncate",children:s.name??"-"}),e.jsx(i,{className:"max-w-[260px] truncate",children:s.email??"-"})]}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[r==="courses"&&s.item_id&&e.jsx(l,{asChild:!0,variant:"ghost",size:"icon",title:"Open Course",children:e.jsx(m,{href:`/admin/courses/${s.item_id}`,children:e.jsx(p,{className:"h-4 w-4"})})}),r==="scholarships"&&s.item_id&&e.jsx(l,{asChild:!0,variant:"ghost",size:"icon",title:"Open Scholarship",children:e.jsx(m,{href:`/admin/scholarships/${s.item_id}`,children:e.jsx(p,{className:"h-4 w-4"})})}),r==="users"&&e.jsx(l,{asChild:!0,variant:"ghost",size:"icon",title:"Open User",children:e.jsx(m,{href:`/admin/users/${s.id}`,children:e.jsx(p,{className:"h-4 w-4"})})}),r!=="users"&&s.item_id&&e.jsx(l,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(m,{href:r==="courses"?`/admin/courses/${s.item_id}`:`/admin/scholarships/${s.item_id}`,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),a==="ar"?"عرض":"Show"]})})]})})]},s.id))})]})}),h.last_page>1&&e.jsx("div",{className:"flex justify-center gap-2",children:h.links.map((s,M)=>e.jsx(l,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,asChild:!!s.url,children:s.url?e.jsx("a",{href:s.url,dangerouslySetInnerHTML:{__html:s.label}}):e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},M))})]})]})})]})}export{Ne as default};
