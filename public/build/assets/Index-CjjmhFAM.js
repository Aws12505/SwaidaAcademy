import{c as G,r as J,j as s,b as W,H as K}from"./app-CyLduagb.js";import{A as O}from"./app-layout-BZEyrgy3.js";import{f as L,B as z}from"./button-Dd_RGYWt.js";import{I as Q}from"./input-aV6-Lx6K.js";import{b as H,e as p,a as U,c as g,T as V,d as X}from"./table-BN2HBjo1.js";import{A as Z,a as k,b as ee,c as se,d as ae,e as te,f as le,g as re,h as ie}from"./alert-dialog-CH1aWlLk.js";import{D as ne,a as ce,b as oe,c as de,d as me,e as he}from"./dialog-DI6n-rwS.js";import{C as E,a as R,c as I,b as F}from"./card-Dyt6vBVt.js";import{E as xe}from"./eye-LDk3dsH-.js";import{T as fe}from"./trash-2-fHEMsi63.js";import{S as je}from"./search-CpoOwQcv.js";/* empty css            */import"./sheet-DUsRuV31.js";import"./index-4kt7fkZ6.js";import"./index-BiUQGlRj.js";import"./target-DLy8DEMq.js";const pe=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Contact Messages",href:"/admin/contact-messages"}];function Fe(l){const e=G.c(41),{messages:a,filters:P}=l,[r,Y]=J.useState(P?.search??"");let u;e[0]!==r?(u=t=>{t.preventDefault(),W.get("/admin/contact-messages",{search:r},{preserveState:!0,preserveScroll:!0})},e[0]=r,e[1]=u):u=e[1];const A=u;let b;if(e[2]!==a.data){const t=new Date;b=a.data.filter(q=>{const B=new Date(q.created_at);return B.getMonth()===t.getMonth()&&B.getFullYear()===t.getFullYear()}),e[2]=a.data,e[3]=b}else b=e[3];const M=b.length,$=ue;let N;e[4]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(K,{title:"Contact Messages"}),e[4]=N):N=e[4];let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(I,{className:"pb-2",children:s.jsx(F,{className:"text-sm",children:"Total Messages"})}),e[5]=v):v=e[5];let i;e[6]!==a.total?(i=s.jsxs(E,{children:[v,s.jsx(R,{children:s.jsx("div",{className:"text-2xl font-bold",children:a.total})})]}),e[6]=a.total,e[7]=i):i=e[7];let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(I,{className:"pb-2",children:s.jsx(F,{className:"text-sm",children:"This Month"})}),e[8]=D):D=e[8];let n;e[9]!==M?(n=s.jsxs(E,{children:[D,s.jsx(R,{children:s.jsx("div",{className:"text-2xl font-bold",children:M})})]}),e[9]=M,e[10]=n):n=e[10];let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(I,{className:"pb-2",children:s.jsx(F,{className:"text-sm",children:"Per Page"})}),e[11]=_):_=e[11];let c;e[12]!==a.per_page?(c=s.jsxs(E,{children:[_,s.jsx(R,{children:s.jsx("div",{className:"text-2xl font-bold",children:a.per_page})})]}),e[12]=a.per_page,e[13]=c):c=e[13];let o;e[14]!==i||e[15]!==n||e[16]!==c?(o=s.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[i,n,c]}),e[14]=i,e[15]=n,e[16]=c,e[17]=o):o=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Contact Messages"}),s.jsx("p",{className:"text-muted-foreground",children:"Review and manage contact form submissions"})]})}),e[18]=S):S=e[18];let C;e[19]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(je,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[19]=C):C=e[19];let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=t=>Y(t.target.value),e[20]=T):T=e[20];let d;e[21]!==r?(d=s.jsx(Q,{placeholder:"Search name, email, or WhatsApp...",value:r,onChange:T,className:"pl-9"}),e[21]=r,e[22]=d):d=e[22];let m;e[23]!==A||e[24]!==d?(m=s.jsxs("form",{onSubmit:A,className:"relative max-w-sm",children:[C,d]}),e[23]=A,e[24]=d,e[25]=m):m=e[25];let y;e[26]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(U,{children:s.jsxs(H,{children:[s.jsx(g,{children:"Full Name"}),s.jsx(g,{children:"Email"}),s.jsx(g,{children:"WhatsApp"}),s.jsx(g,{children:"Received"}),s.jsx(g,{className:"text-right",children:"Actions"})]})}),e[26]=y):y=e[26];let h;e[27]!==a.data?(h=a.data.length?a.data.map(t=>s.jsxs(H,{children:[s.jsx(p,{className:"font-medium",children:t.full_name}),s.jsx(p,{className:"text-sm text-muted-foreground",children:t.email??"-"}),s.jsx(p,{className:"text-sm",children:t.whatsapp_number}),s.jsx(p,{className:"text-sm text-muted-foreground",children:L(t.created_at,"en")}),s.jsx(p,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(ne,{children:[s.jsx(ce,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"icon",children:s.jsx(xe,{className:"h-4 w-4"})})}),s.jsxs(oe,{className:"sm:max-w-lg",children:[s.jsxs(de,{children:[s.jsxs(me,{children:["Message from ",t.full_name]}),s.jsxs(he,{children:["Received: ",L(t.created_at,"en")]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email??"â€”"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",t.whatsapp_number]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"font-medium mb-1",children:"Message"}),s.jsx("div",{className:"rounded-md border p-3 whitespace-pre-wrap text-sm",children:t.message})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(k,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"icon",children:s.jsx(fe,{className:"h-4 w-4 text-destructive"})})}),s.jsxs(ee,{children:[s.jsxs(se,{children:[s.jsx(ae,{children:"Delete this message?"}),s.jsx(te,{children:"This action cannot be undone."})]}),s.jsxs(le,{children:[s.jsx(re,{children:"Cancel"}),s.jsx(ie,{onClick:()=>$(t.id),children:"Delete"})]})]})]})]})})]},t.id)):s.jsx(H,{children:s.jsx(p,{colSpan:5,className:"h-24 text-center",children:"No messages found."})}),e[27]=a.data,e[28]=h):h=e[28];let x;e[29]!==h?(x=s.jsx("div",{className:"rounded-md border",children:s.jsxs(V,{children:[y,s.jsx(X,{children:h})]})}),e[29]=h,e[30]=x):x=e[30];let f;e[31]!==a.last_page||e[32]!==a.links?(f=a.last_page>1&&s.jsx("div",{className:"flex justify-center gap-2",children:a.links.map(ge)}),e[31]=a.last_page,e[32]=a.links,e[33]=f):f=e[33];let j;e[34]!==m||e[35]!==x||e[36]!==f?(j=s.jsx("div",{className:"relative min-h-[100vh] flex-1 rounded-xl border md:min-h-min dark:border-sidebar-border",children:s.jsxs("div",{className:"p-6 space-y-6",children:[S,m,x,f]})}),e[34]=m,e[35]=x,e[36]=f,e[37]=j):j=e[37];let w;return e[38]!==o||e[39]!==j?(w=s.jsxs(O,{breadcrumbs:pe,children:[N,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[o,j]})]}),e[38]=o,e[39]=j,e[40]=w):w=e[40],w}function ge(l,e){return s.jsx(z,{variant:l.active?"default":"outline",size:"sm",disabled:!l.url,asChild:!!l.url,children:l.url?s.jsx("a",{href:l.url,dangerouslySetInnerHTML:{__html:l.label}}):s.jsx("span",{dangerouslySetInnerHTML:{__html:l.label}})},e)}function ue(l){W.delete(`/admin/contact-messages/${l}`,{preserveScroll:!0})}export{Fe as default};
